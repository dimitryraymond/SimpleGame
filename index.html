<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <title>Welcome Page</title>
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <script type="text/javascript" src = "script/simpleGame_modified.js"></script>
  <script type="text/javascript" src = "script/game.js"></script>
  <script>
    var ship;
    var planet;
    var game;
    var gravityRoom;

    //for canvas size
    var canvasBounds;
    var widthRatio;
    var heightRatio;

    function init(){
        game = new Scene();
        ship = new Projectile(game, "images/ship.png", 16, 16);
        ship.setSpeed(6);
        ship.setPosition(1000, 200);
        ship2 = new Projectile(game, "images/ship.png", 50, 50);
        ship2.setSpeed(-2);
        ship2.setPosition(1000, 500);
        ship2.mass = 200;
        gravityRoom = new GravityRoom(game);
        gravityRoom.projectiles = [ship, ship2];

        canvasBounds = game.canvas.getBoundingClientRect();
        widthRatio = game.canvas.width / canvasBounds.width;
        heightRatio = game.canvas.height / canvasBounds.height;

        game.start();
    } // end init

    function update(){
        game.clear();
        //checkGravity();
        gravityRoom.applyGravity();
        gravityRoom.updateAllProjectiles();
    } // end update

    document.addEventListener("mousedown", function(event){
      var size = Math.floor((Math.random() * 100) + 10);
      if(Math.random() < 0.03) //spawn mothership at 3% chance
        size = 300;
      var mass = size * size / 50;
      var newShip = new Projectile(game, "images/ship.png", size, size);
      var x = (event.clientX - canvasBounds.left) * widthRatio;
      var y = (event.clientY - canvasBounds.top) * heightRatio;
      newShip.setPosition(x, y);
      newShip.setSpeed(0);
      newShip.mass = mass;
      gravityRoom.addProjectile(newShip);
    }, false);
  </script>
</head>
<body onload = "init()">

</body>
</html>
